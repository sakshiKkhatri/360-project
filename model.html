<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>GLB Model Viewer</title>

  <!-- A-Frame -->
  <script src="https://aframe.io/releases/1.4.1/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-orbit-controls-component@0.3.0/dist/aframe-orbit-controls-component.min.js"></script>

  <style>
    :root {
      --ui-bg: rgba(0,0,0,0.45);
      --btn-bg: rgba(255,255,255,0.08);
      --btn-radius: 12px;
      --btn-padding: 10px 12px;
      --safe-bottom: env(safe-area-inset-bottom, 12px);
    }
    html,body{height:100%;margin:0;background:#111;color:#fff;font-family:Inter,system-ui,Arial}
    #controls{position:absolute;z-index:1500;display:flex;gap:10px;flex-wrap:wrap}
    @media (min-width:701px){#controls{left:12px;top:12px}}
    @media (max-width:700px){#controls{left:50%;bottom:calc(var(--safe-bottom) + 14px);transform:translateX(-50%)}}
    .btn{background:var(--btn-bg);border:1px solid rgba(255,255,255,0.06);color:#fff;
      padding:var(--btn-padding);border-radius:var(--btn-radius);cursor:pointer;font-size:14px}
    .btn:active{transform:translateY(1px)}
    #modelName{position:absolute;right:12px;top:12px;z-index:1400;background:var(--ui-bg);
      padding:8px 12px;border-radius:10px;font-size:13px}
  </style>
</head>
<body>

<div id="controls">
  <button id="resetBtn" class="btn">Reset</button>
  <button id="fullscreenBtn" class="btn">Fullscreen</button>
  <button id="enterVrBtn" class="btn">Enter VR</button>
</div>

<div id="modelName">Loading: example-model.glb</div>

<a-scene embedded vr-mode-ui="enabled:true" background="color:#000">
  <a-assets>
    <a-asset-item id="defaultModel" src="example-model.glb"></a-asset-item>
  </a-assets>

  <!-- Orbit camera -->
  <a-entity id="cameraRig">
    <a-entity id="camera" camera position="0 1.6 3"
              orbit-controls="target:0 1 0; enableDamping:true; dampingFactor:0.125; rotateSpeed:0.4; enableZoom:true; minDistance:0.6; maxDistance:20">
    </a-entity>
  </a-entity>

  <!-- Lights -->
  <a-entity light="type: ambient; intensity: 0.6"></a-entity>
  <a-entity light="type: directional; intensity: 0.9" position="1 3 2"></a-entity>

  <!-- Ground plane -->
  <a-plane rotation="-90 0 0" width="50" height="50" color="#222"></a-plane>

  <!-- Model -->
  <a-entity id="modelRoot" gltf-model="#defaultModel" position="0 0 0"></a-entity>
</a-scene>

<script>
const scene = document.querySelector('a-scene');
const camera = document.querySelector('#camera');
const modelRoot = document.getElementById('modelRoot');
const modelName = document.getElementById('modelName');

// Reset button
document.getElementById('resetBtn').onclick = () => {
  camera.setAttribute('position','0 1.6 3');
  camera.setAttribute('orbit-controls','target:0 1 0; enableDamping:true; dampingFactor:0.125; rotateSpeed:0.4;');
};

// Fullscreen button
document.getElementById('fullscreenBtn').onclick = () => {
  if(!document.fullscreenElement) document.documentElement.requestFullscreen?.();
  else document.exitFullscreen?.();
};

// VR button
document.getElementById('enterVrBtn').onclick = async () => {
  try {
    if(scene.is('vr-mode')) scene.exitVR();
    else await scene.enterVR();
  } catch(e) {
    alert('VR requires HTTPS and a supported device/browser.');
  }
};

// Update label when model loads
modelRoot.addEventListener('model-loaded', () => {
  modelName.textContent = 'Loaded: example-model.glb';
});
</script>

</body>
</html>
